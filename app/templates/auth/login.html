{% extends 'base.html' %}
{% block content %}

{% if checkout == 'checkout' %}

  <p class="alert alert-info">
    Sign up for an account or log in so you can check the progress of your order from your account page!
  </p>

{% endif %}

<div class="row justify-content-center">
  <div class="col-md-6 col-10">
    <div class="card">
      <div class="card-body">

        <ul class="nav nav-pills nav-fill mb-4">
          <li class="nav-item">
            <a href="{{ url_for('auth.login', checkout=checkout) }}" class="nav-link {% if title == 'Login' %}active{% endif %}">
              Login
            </a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('auth.sign_up', checkout=checkout) }}" class="nav-link {% if title == 'Sign Up' %}active{% endif %}">
              Sign Up
            </a>
          </li>
        </ul>

        <form method="post" action="">
  
          {{ form.hidden_tag() }}

          {% if title == 'Login' %}

            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="Email">
                  <i class="fas fa-envelope"></i>
                </span>
              </div>
              {% if form.email.errors %}
                {{ form.email(class="form-control form-control-lg is-invalid",placeholder="Email") }}
                <div class="invalid-feedback">
                  {% for error in form.email.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.email(class="form-control form-control-lg", placeholder="Email") }}
              {% endif %}
            </div>

            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="Password">
                  <i class="fas fa-key"></i>
                </span>
              </div>
              {% if form.password.errors %}
                {{ form.password(class="form-control form-control-lg is-invalid", placeholder="Password") }}
                <div class="invalid-feedback">
                  {% for error in form.password.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.password(class="form-control form-control-lg",placeholder="Password") }}
              {% endif %}
            </div>

            <div class="form-group form-check mb-3 text-center">
                {{ form.remember_me(class="form-check-input") }}
                {{ form.remember_me.label(class="form-check-label") }}
            </div>

          {% else %}

            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="First and Last Name">
                  <i class="fas fa-user"></i>
                </span>
              </div>
              
              <!--FIRST NAME-->
              {% if form.first_name.errors %}
                {{ form.first_name(class="form-control form-control-lg is-invalid",placeholder="First Name") }}
                <div class="invalid-feedback">
                  {% for error in form.first_name.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.first_name(class="form-control form-control-lg", placeholder="First Name") }}
              {% endif %}

              <!--LAST NAME-->
              {% if form.last_name.errors %}
                {{ form.last_name(class="form-control form-control-lg is-invalid",placeholder="Last Name") }}
                <div class="invalid-feedback">
                  {% for error in form.last_name.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.last_name(class="form-control form-control-lg", placeholder="Last Name") }}
              {% endif %}

            </div>

            <!--EMAIL-->
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="Email">
                  <i class="fas fa-envelope"></i>
                </span>
              </div>
              {% if form.email.errors %}
                {{ form.email(class="form-control form-control-lg is-invalid",placeholder="Email") }}
                <div class="invalid-feedback">
                  {% for error in form.email.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.email(class="form-control form-control-lg", placeholder="Email") }}
              {% endif %}
            </div>

            <!--PASSWORD-->
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="Password">
                  <i class="fas fa-key"></i>
                </span>
              </div>
              {% if form.new_password.errors %}
                {{ form.new_password(class="form-control form-control-lg is-invalid", placeholder="Password") }}
                <div class="invalid-feedback">
                  {% for error in form.new_password.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.new_password(class="form-control form-control-lg",placeholder="Password") }}
              {% endif %}
            </div>

            <!--CONFIRM PASSWORD-->
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text jquery-tooltip" title="Confirm Password">
                  <i class="fas fa-key"></i>
                </span>
              </div>
              {% if form.confirm_password.errors %}
                {{ form.confirm_password(class="form-control form-control-lg is-invalid", placeholder="Confirm") }}
                <div class="invalid-feedback">
                  {% for error in form.confirm_password.errors %}
                    <span>{{ error }}</span>
                  {% endfor %}
                </div>
              {% else %}
                {{ form.confirm_password(class="form-control form-control-lg",placeholder="Confirm Password") }}
              {% endif %}
            </div>

            <!--SUBSCRIBED-->
            <div class="form-group form-check mb-3 text-center">
                {{ form.subscribed(class="form-check-input") }}
                {{ form.subscribed.label(class="form-check-label") }}
            </div>

          {% endif %}

          <button type="submit" class="btn btn-primary btn-lg btn-block">
            <i class="fas fa-user"></i>
            {{ title }}
          </button>
  
        </form>
        
        {% if checkout == 'checkout' %}

          <a href="{{ url_for('shop.shipping') }}" class="btn btn-block btn-secondary btn-lg mt-3">
            <i class="fas fa-user-secret"></i>
            Continue as Guest
          </a>

        {% endif %}

      </div>
    </div>
  </div>
</div>

{% endblock %}
